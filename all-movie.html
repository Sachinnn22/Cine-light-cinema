<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>CINE-LIGHT</title>

    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" rel="stylesheet" />
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="user_styles/all-movie.css">
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700;900&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Orbitron&display=swap" rel="stylesheet" />
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;700&display=swap" rel="stylesheet" />

    <style>
        html, body {
            height: 100%;
            margin: 0;
            padding: 0;
            background: linear-gradient(to bottom, #000000e6, #1c1c1c) !important;
        }


        @media (max-width: 425px) {
            .nav-links {
                display: none;
            }

            .dropdown {
                display: block;
                text-align: left;
                position: absolute;
                top: 48px;
                left: 6px;
                width: 200px;
                background-color: rgba(0, 0, 0, 0.85);
                border-radius: 8px;
                padding: 12px 16px;
                z-index: 999;
                border: 1px solid rgba(251, 250, 250, 0.3);
            }

            .dropdown a {
                display: block;
                padding: 10px 12px;
                border-radius: 6px;
                color: white;
                transition: background-color 0.2s, color 0.2s;
            }

            .dropdown a:hover {
                background-color: #a1a1a1;
                color: black;
            }

            .nav-logo-text {
                font-size: 1.34em !important;
            }
        }

        @media (width: 1024px) {
            .movie {
                grid-template-columns: repeat(3, 1fr) !important;
            }
        }

        @media (max-width: 375px) {
            .nav-logo-text {
                font-size: 1.22em !important;
            }

            .nav-links {
                display: none;
            }

            .dropdown {
                display: block;
                text-align: left;
                position: absolute;
                top: 48px;
                left: 6px;
                width: 200px;
                background-color: rgba(0, 0, 0, 0.85);
                border-radius: 8px;
                padding: 12px 16px;
                z-index: 999;
                border: 1px solid rgba(251, 250, 250, 0.3);
            }

            .dropdown a {
                display: block;
                padding: 10px 12px;
                border-radius: 6px;
                color: white;
                transition: background-color 0.2s, color 0.2s;
            }

            .dropdown a:hover {
                background-color: #a1a1a1;
                color: black;
            }
        }

        @media (max-width: 320px) {
            .nav-logo-text {
                font-size: 1.08em !important;
            }

            .nav-links {
                display: none;
            }

            .dropdown {
                display: block;
                text-align: left;
                position: absolute;
                top: 48px;
                left: 6px;
                width: 200px;
                background-color: rgba(0, 0, 0, 0.85);
                border-radius: 8px;
                padding: 12px 16px;
                z-index: 999;
                border: 1px solid rgba(251, 250, 250, 0.3);
            }

            .dropdown a {
                display: block;
                padding: 10px 12px;
                border-radius: 6px;
                color: white;
                transition: background-color 0.2s, color 0.2s;
            }

            .dropdown a:hover {
                background-color: #a1a1a1;
                color: black;
            }
        }

        .nav-logo-text {
            font-family: 'Orbitron', sans-serif;
            background: linear-gradient(135deg, #37a199, #8f2424, #c68711);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            text-fill-color: transparent;
            text-shadow: 0 0 10px rgb(38, 52, 57), 0 0 20px rgba(45, 67, 81, 0.3);
        }

        @keyframes gradientShift {
            0% {
                background-position: 0% 50%;
            }
            50% {
                background-position: 100% 50%;
            }
            100% {
                background-position: 0% 50%;
            }
        }

        @keyframes float {
            0%, 100% {
                transform: translateY(0);
                box-shadow: 0 0 15px rgba(255, 255, 255, 0.4);
            }
            50% {
                transform: translateY(-10px);
                box-shadow: 0 0 20px rgba(255, 255, 255, 0.6);
            }
        }

        .float-animation {
            animation: float 6s ease-in-out infinite;
            will-change: transform, box-shadow;
        }


        .all-movie-header {
            font-size: 3rem !important;
            font-weight: 600 !important;
            font-family: 'Montserrat', sans-serif;
            letter-spacing: 2px !important;

            /* Remove gradient background and clipping */
            background: none !important;
            -webkit-background-clip: unset !important;
            -webkit-text-fill-color: unset !important;
            background-clip: unset !important;
            text-fill-color: unset !important;
            animation: none !important;

            /* Set solid white color */
            color: white !important;

            /* Combined white and red text shadow */
            text-shadow:
                    0 0 3px rgba(255, 255, 255, 0.5),
                    0 0 6px rgba(255, 255, 255, 0.3),
                    0 0 5px rgba(255, 0, 0, 0.7),
                    0 0 10px rgba(255, 0, 0, 0.7);
        }

        @keyframes glowShift {
            0% { background-position: 0% center; }
            50% { background-position: 100% center; }
            100% { background-position: 0% center; }
        }

        @keyframes float {
            0%, 100% {
                transform: translateY(0);
                box-shadow: 0 10px 13px rgba(198,194,194,0.4);
            }
            50% {
                transform: translateY(-10px);
                box-shadow: 0 14px 16px rgba(198,194,194,0.6);
            }
        }

        .movie-card-animated {
            animation: float 6s ease-in-out infinite;
            will-change: transform;
        }

        .movie-card-animated:nth-child(odd) {
            animation-delay: 0s;
        }
        .movie-card-animated:nth-child(even) {
            animation-delay: 3s;
        }

        @media (max-width: 425px) {
            .movie-card-animated {
                padding: 1rem !important;
                border-width: 1.5px !important;
                font-size: 0.9rem !important;
                width: 80% !important; /* Reduce width */
                margin-left: auto !important; /* Center horizontally */
                margin-right: auto !important;
                height: 330px !important;

            }
            .movie-card-animated img {
                height: 200px !important;
            }
            .movie-card-animated h3 {
                font-size: 1.25rem !important;
            }
            .movie-card-animated p {
                font-size: 0.89rem !important;
            }
            .all-movie-header{
                font-size: 2.3rem !important;
            }
        }@keyframes float {
             0%, 100% {
                 transform: translateY(0);
                 box-shadow: 0 10px 13px rgba(198,194,194,0.4);
             }
             50% {
                 transform: translateY(-10px);
                 box-shadow: 0 14px 16px rgba(198,194,194,0.6);
             }
         }

        .movie-card-animated {
            animation: float 6s ease-in-out infinite;
            will-change: transform;
            cursor: pointer;
        }

        .movie-card-animated:nth-child(odd) {
            animation-delay: 0s;
        }

        .movie-card-animated:nth-child(even) {
            animation-delay: 3s;  /* half of 6s duration */
        }


        @media (max-width: 375px) {
            .movie-card-animated {
                padding: 0.75rem !important;
                font-size: 0.85rem !important;
                width: 83% !important; /* Reduce width */
                margin-left: auto !important; /* Center horizontally */
                margin-right: auto !important;
                height: 300px !important;

            }
            .movie-card-animated img {
                height: 180px !important;
            }
            .movie-card-animated h3 {
                font-size: 1.2rem !important;
            }
            .movie-card-animated p {
                font-size: 0.84rem !important;
            }
            .all-movie-header{
                font-size: 2rem !important;
            }
        }

        @media (max-width: 320px) {
            .movie-card-animated {
                padding: 0.5rem !important;
                font-size: 0.8rem !important;
                width: 90% !important;
                margin-left: auto !important;
                margin-right: auto !important;
                height: 300px !important;
            }
            .movie-card-animated img {
                height: 180px !important;
            }
            .movie-card-animated h3 {
                font-size: 1.18rem !important;
            }
            .movie-card-animated p {
                font-size: 0.8rem !important;
            }
            .all-movie-header{
                font-size: 1.6rem !important;
            }
        }

        .custom-glass-footer {
            background: #000000;
            backdrop-filter: blur(16px) saturate(160%);
            -webkit-backdrop-filter: blur(16px) saturate(160%);
            border-top: 3px solid rgb(145, 140, 140);
            box-shadow: 0 -2px 15px rgba(255, 255, 255, 0.05);
            color: white;
        }

        .custom-glass-footer a {
            transition: all 0.3s ease;
        }

        .custom-glass-footer a:hover {
            color: #318fb6;
            text-decoration: underline;
        }

        @keyframes pulseGlow {
            0%, 100% {
                text-shadow: 1px 1px 4px rgba(255, 255, 255, 0.15);
            }
            50% {
                text-shadow: 0 0 12px rgba(255, 255, 255, 0.35);
            }
        }

        .foot-head {
            font-family: 'Montserrat', sans-serif;
            font-size: 1.6rem;
            font-weight: 800;
            letter-spacing: 5px;
            background: linear-gradient(45deg, #c67d7d, #497588, #2b8fb6, #96ceb4, #feca57);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            text-fill-color: transparent;
            text-shadow: 1px 1px 4px rgba(255, 255, 255, 0.15);
            animation: pulseGlow 4s infinite ease-in-out;
            user-select: none;
        }

        .flex a img {
            transition: transform 0.3s ease;
        }

        .flex a img:hover {
            transform: scale(1.25);
        }

        .foot-sub{
            font-weight: 600;
            font-size: 0.9rem;
            letter-spacing: 0.7px;
            width: 230px;
        }

        .fallow {
            font-family: 'Montserrat', sans-serif;
            font-size: 1.4rem;
            font-weight: 800;
            letter-spacing: 1.5px;
        }

        .movie {
            font-family: 'Montserrat', sans-serif;
            font-size: 1.4rem;
            font-weight: 800;
            letter-spacing: 1.5px;
        }

        .movie-sub {
            font-family: 'Open Sans', sans-serif;
            font-size: 0.9rem;
        }

        .company {
            font-family: 'Montserrat', sans-serif;
            font-size: 1.4rem;
            font-weight: 800;
            letter-spacing: 1.5px;
        }

        .company-sub {
            font-family: 'Open Sans', sans-serif;
            font-size: 0.9rem;
        }

        .copy{
            font-size: 0.95rem;
            color: #d8d2d2;
            font-weight: 700;
            letter-spacing: 0.4px;
        }

        .sin{
            font-weight: 900;
            background: linear-gradient(45deg, #c67d7d, #497588, #2b8fb6, #96ceb4, #feca57);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            text-fill-color: transparent;
            text-shadow: 1px 1px 4px rgba(255, 255, 255, 0.15);
            animation: pulseGlow 4s infinite ease-in-out;
            user-select: none;
        }

        @media (min-width: 996px) and (max-width: 1210px){
            .custom-glass-footer > div.max-w-7xl {
                display: grid;
                margin-left: 1rem;
                grid-template-columns: repeat(4, minmax(0, 1fr));
                grid-template-rows: auto;
                gap: 2rem;
                place-items: center;
                justify-content: center;
                text-align: center;
                margin-right: auto;
            }

            .custom-glass-footer > div.max-w-7xl > div {
                justify-self: center;
                align-self: center;
                text-align: center;
            }

            .custom-glass-footer .flex {
                justify-content: center !important;
            }
        }

        @media (min-width: 580px) and (max-width: 995px) {
            .custom-glass-footer > div.max-w-7xl {
                display: grid;
                grid-template-columns: repeat(2, minmax(0, 1fr));
                grid-template-rows: auto auto;
                gap: 3rem 1rem;
                place-items: center center;
                justify-content: center;
                text-align: center;
                margin-left: auto;
                margin-right: auto;
            }

            .custom-glass-footer > div.max-w-7xl > div:nth-child(1) {
                grid-column: 1;
                grid-row: 1;
            }

            .custom-glass-footer > div.max-w-7xl > div:nth-child(2) {
                grid-column: 2;
                grid-row: 1;
            }

            .custom-glass-footer > div.max-w-7xl > div:nth-child(3) {
                grid-column: 1;
                grid-row: 2;
            }

            .custom-glass-footer > div.max-w-7xl > div:nth-child(4) {
                grid-column: 2;
                grid-row: 2;
            }

            .custom-glass-footer > div.max-w-7xl > div {
                justify-self: center;
                align-self: center;
                text-align: center;
            }

            .custom-glass-footer .flex {
                justify-content: center !important;
            }
        }

        @media (min-width: 425px) and (max-width: 579px){
            .custom-glass-footer > div.max-w-7xl {
                display: grid;
                grid-template-columns: 1fr;
                grid-template-rows: auto auto auto auto;
                gap: 1rem;
                place-items: center center;
                text-align: center;
                margin-left: auto;
                margin-right: auto;
            }

            .custom-glass-footer > div.max-w-7xl > div {
                grid-column: 1;
                justify-self: center;
                align-self: center;
            }

            .custom-glass-footer .flex {
                justify-content: center !important;
            }

            .custom-glass-footer > div.max-w-7xl > div:nth-child(3) {
                margin-bottom: 0.5rem;
                padding-bottom: 0.2rem;
            }

            .custom-glass-footer > div.max-w-7xl > div:nth-child(4) {
                margin-top: 0.3rem;
                padding-top: 0.2rem;
            }

            .custom-glass-footer > div.max-w-7xl > div:last-child {
                padding-bottom: 1.2rem !important;
            }

            .custom-glass-footer .copy {
                padding-top: 0.6rem !important;
                margin-top: 0;
            }
        }

        @media (min-width: 375px) and (max-width: 424px){
            .custom-glass-footer > div.max-w-7xl {
                gap: 0.85rem;
            }

            .custom-glass-footer > div.max-w-7xl > div:nth-child(3) {
                margin-bottom: 0.4rem;
                padding-bottom: 0.15rem;
            }

            .custom-glass-footer > div.max-w-7xl > div:nth-child(4) {
                margin-top: 0.25rem;
                padding-top: 0.15rem;
            }

            .custom-glass-footer > div.max-w-7xl > div:last-child {
                padding-bottom: 1rem !important;
            }

            .custom-glass-footer .copy {
                padding-top: 0.5rem !important;
                margin-top: 0;
            }
        }

        @media (min-width: 320px) and (max-width: 374px){
            .custom-glass-footer > div.max-w-7xl {
                gap: 0.7rem;
            }

            .custom-glass-footer > div.max-w-7xl > div:nth-child(3) {
                margin-bottom: 0.3rem;
                padding-bottom: 0.1rem;
            }

            .custom-glass-footer > div.max-w-7xl > div:nth-child(4) {
                margin-top: 0.2rem;
                padding-top: 0.1rem;
            }

            .custom-glass-footer > div.max-w-7xl > div:last-child {
                padding-bottom: 0.8rem !important;
            }

            .custom-glass-footer .copy {
                padding-top: 0.4rem !important;
                margin-top: 0;
            }
        }

    </style>
</head>
<body>

<nav class="fixed top-0 left-0 right-0 z-50 text-white shadow-md px-4 py-3 border-b border-white/20 backdrop-blur-md bg-black/40">
    <div class="w-full relative sm:grid sm:grid-cols-3 items-center">
        <div class="flex sm:hidden justify-between items-center w-full relative">
            <button id="dropdownToggle" class="text-white text-xl ml-2" aria-label="Toggle menu">
                <i id="dropdownIcon" class="fas fa-bars"></i>
            </button>

            <div class="absolute left-1/2 transform -translate-x-1/2 select-none">
                <span class="nav-logo-text text-[1.8em] font-bold tracking-[3px] drop-shadow-md">
                    CINE<span class="opacity-80">-</span>LIGHT
                </span>
            </div>

            <a href="index.html" class="text-gray-200 text-xl hover:text-gray-400 transition mr-3">
                <i class="fas fa-house" style="filter: drop-shadow(0 0 6px rgba(255, 255, 255, 0.6));"></i>
            </a>
        </div>

        <div class="hidden sm:flex justify-start ml-4">
            <span class="nav-logo-text text-[1.8em] font-bold tracking-[3px] drop-shadow-md select-none">
                CINE<span class="opacity-80">-</span>LIGHT
            </span>
        </div>

        <div class="hidden sm:flex justify-center nav-links gap-8 text-lg font-semibold items-center">
            <a href="horror.html"
               class="flex items-center gap-2 border-b-2 border-transparent transition duration-300 hover:text-red-400 hover:border-red-600 hover:scale-105 hover:bg-black/10 px-2 py-1 rounded-md">
                <i class="fas fa-mask"></i> Horror
            </a>

            <a href="comedy.html"
               class="flex items-center gap-2 border-b-2 border-transparent transition duration-300 hover:text-yellow-300 hover:border-yellow-400 hover:scale-105 hover:bg-black/10 px-2 py-1 rounded-md">
                <i class="fas fa-theater-masks"></i> Comedy
            </a>

            <a href="action.html"
               class="flex items-center gap-2 border-b-2 border-transparent transition duration-300 hover:text-blue-400 hover:border-blue-500 hover:scale-105 hover:bg-black/10 px-2 py-1 rounded-md">
                <i class="fas fa-person-running"></i> Action
            </a>

            <a href="fiction.html"
               class="flex items-center gap-2 border-b-2 border-transparent transition duration-300 hover:text-purple-400 hover:border-purple-500 hover:scale-105 hover:bg-black/10 px-2 py-1 rounded-md">
                <i class="fas fa-meteor"></i> Fiction
            </a>
        </div>

        <div class="hidden sm:flex justify-end mr-4">
            <a href="index.html" class="text-gray-200 text-2xl hover:text-gray-400 transition flex items-center leading-none">
                <i class="fas fa-house" style="filter: drop-shadow(0 0 6px rgba(255, 255, 255, 0.6));"></i>
            </a>
        </div>

        <div id="dropdownMenu" class="dropdown hidden sm:hidden">
            <a href="horror.html"><i class="fas fa-mask mr-2"></i>Horror</a>
            <a href="comedy.html"><i class="fas fa-theater-masks mr-2"></i>Comedy</a>
            <a href="action.html"><i class="fas fa-person-running mr-2"></i>Action</a>
            <a href="fiction.html"><i class="fas fa-meteor mr-2"></i>Fiction</a>
        </div>
    </div>
</nav>

<section class="px-4 sm:px-8 lg:px-16">
    <h2 class="all-movie-header text-white text-3xl font-bold mb-4 tracking-wide text-center" style="padding-top: 6.5rem;">
        Find Your Movie
    </h2>
    <hr class="border-gray-400 mb-8 w-1/2 mx-auto">

    <div class="flex justify-center mb-11">
        <div class="flex items-center w-full max-w-md space-x-3">
            <input
                    type="text"
                    placeholder="Search any movies..."
                    class="flex-grow rounded-full py-3 px-4 text-white bg-[#3c3d3c] placeholder-gray-100 focus:outline-none focus:ring-2 focus:ring-white"
            />
            <span class="text-gray-100 text-xl transition duration-200 hover:text-gray-500 hover:scale-110 cursor-pointer">
      <i class="fas fa-search"></i>
    </span>
        </div>
    </div>

    <div id="all-movies-container" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-7 movie">

    </div>

    <div id="pagination-controls" class="flex justify-center gap-4 mt-10 mb-12"></div>


</section>


<footer class="custom-glass-footer text-white">
    <div class="max-w-7xl mx-auto px-12 py-10 grid grid-cols-1 md:grid-cols-4 gap-2 place-items-center text-center">
        <div class="space-y-2 pb-5">
            <h2 class="foot-head">CINE-LIGHT</h2>
            <p class="foot-sub">Delivering blockbuster moments, one reel at a time, inspiring stories that captivate the soul.</p>
        </div>

        <div class="space-y-2 pt-1.7">
            <h3 class="movie">Movies</h3>
            <ul class="movie-sub space-y-1">
                <li><a href="#" class="hover:underline">Action</a></li>
                <li><a href="#" class="hover:underline">Horror</a></li>
                <li><a href="#" class="hover:underline">Sci-Fic</a></li>
                <li><a href="#" class="hover:underline">Romance</a></li>
            </ul>
        </div>

        <div class="space-y-2 pb-10">
            <h3 class="company">Company</h3>
            <ul class="company-sub space-y-1">
                <li><a href="#" class="hover:underline">Why Us</a></li>
                <li><a href="#" class="hover:underline">FAQ's</a></li>
            </ul>
        </div>

        <div class="space-y-3" style="padding-bottom: 3.25rem;">
            <h2 class="fallow">Follow Us</h2>
            <div class="flex justify-center gap-4">
                <a href="#">
                    <img src="https://cdn-icons-png.flaticon.com/128/5968/5968764.png" class="w-9 h-9 rounded-full" alt="Facebook" />
                </a>
                <a href="#">
                    <img src="https://cdn-icons-png.flaticon.com/512/2111/2111463.png" class="w-9 h-9 rounded-full" alt="Instagram" />
                </a>
                <a href="#">
                    <img src="https://cdn-icons-png.flaticon.com/512/5968/5968804.png" class="w-9 h-9 rounded-full" alt="Telegram" />
                </a>
            </div>

        </div>
    </div>
    <div class="text-center border-t border-gray-300/30 py-4 copy">
        © 2025 <span class="sin">CINE-LIGHT</span>. All rights reserved.
    </div>
</footer>

<script>
    const dropdownToggle = document.getElementById("dropdownToggle");
    const dropdownMenu = document.getElementById("dropdownMenu");
    const dropdownIcon = document.getElementById("dropdownIcon");

    dropdownToggle.addEventListener("click", () => {
        dropdownMenu.classList.toggle("hidden");

        if (dropdownMenu.classList.contains("hidden")) {
            dropdownIcon.classList.remove("fa-xmark");
            dropdownIcon.classList.add("fa-bars");
        } else {
            dropdownIcon.classList.remove("fa-bars");
            dropdownIcon.classList.add("fa-xmark");
        }
    });
</script>

<script>
    async function loadAllMovies() {
        const container = document.getElementById("all-movies-container");
        container.innerHTML = ''; // Clear old cards

        try {
            const res = await fetch("http://localhost:8080/api/movies");
            if (!res.ok) throw new Error("Failed to fetch movies");
            const movies = await res.json();

            movies.forEach(movie => {
                const releaseDate = new Date(movie.releaseDate).toLocaleDateString('en-US', {
                    year: 'numeric',
                    month: 'short',
                    day: 'numeric'
                });

                const cardHtml = `
  <article class="movie-card-animated  relative bg-gradient-to-br from-gray-900 via-black to-gray-900 rounded-2xl overflow-hidden border border-white shadow-[0_0_15px_rgba(255,255,255,0.4)] transform transition duration-300 flex flex-col backdrop-blur-sm h-80 min-w-[18rem]">
    <div class="relative w-full h-full rounded-2xl overflow-hidden">
      <img src="http://localhost:8080/uploads/${movie.imagePath}" alt="${movie.name}"
        class="w-full h-full object-cover brightness-75 hover:brightness-110 transition duration-500 ease-in-out" />
      <div class="absolute inset-0 bg-gradient-to-t from-black via-transparent to-transparent pointer-events-none"></div>
      <div class="absolute top-3 right-3 bg-green-500 text-black font-semibold px-3 py-1 rounded-md text-sm shadow-[0_0_8px_white]">
        ★ ${movie.rating.toFixed(1)}
      </div>
      <div class="absolute bottom-0 left-0 w-full bg-gradient-to-t from-black/90 via-black/40 to-transparent p-4 rounded-b-2xl">
        <h3 class="text-2xl font-extrabold tracking-wide text-white drop-shadow-lg leading-snug">
          ${movie.name}
        </h3>
        <p class="text-green-400 uppercase font-semibold text-sm mt-1">
          ${movie.category}
        </p>
        <p class="text-gray-200 text-xs mt-1 italic">
          ${releaseDate}
        </p>
      </div>
    </div>
  </article>
`;


                container.innerHTML += cardHtml;
            });

        } catch (error) {
            console.error("Error loading movies:", error);
            container.innerHTML = '<p class="text-white text-center col-span-4">Failed to load movies.</p>';
        }
    }

    // Run on page load
    // window.addEventListener('DOMContentLoaded', loadAllMovies);

    async function searchMovies(keyword) {
        const container = document.getElementById("all-movies-container");
        container.innerHTML = ''; // Clear current movies

        if (!keyword.trim()) {
            // If search box is empty, load all movies
            loadAllMovies();
            return;
        }

        try {
            const res = await fetch(`http://localhost:8080/api/movies/search?keyword=${encodeURIComponent(keyword)}`);
            if (!res.ok) throw new Error("Failed to fetch searched movies");
            const movies = await res.json();

            if (movies.length === 0) {
                container.innerHTML = '<p class="text-white text-center col-span-4">No movies found.</p>';
                return;
            }

            movies.forEach(movie => {
                const releaseDate = new Date(movie.releaseDate).toLocaleDateString('en-US', {
                    year: 'numeric',
                    month: 'short',
                    day: 'numeric'
                });
                const cardHtml = `
  <article class=" cursor-pointer relative bg-gradient-to-br from-gray-900 brightness-110 via-black to-gray-900 rounded-2xl overflow-hidden border border-white shadow-[0_0_15px_rgba(255,255,255,0.4)] transform hover:scale-105 transition duration-300 flex flex-col backdrop-blur-sm h-80 min-w-[18rem]">
    <div class="relative w-full h-full rounded-2xl overflow-hidden">
      <img src="http://localhost:8080/uploads/${movie.imagePath}" alt="${movie.name}"
        class="w-full h-full object-cover brightness-75 hover:brightness-110" />
      <div class="absolute inset-0 bg-gradient-to-t from-black via-transparent to-transparent pointer-events-none"></div>
      <div class="absolute top-3 right-3 bg-green-500 text-black font-semibold px-3 py-1 rounded-md text-sm shadow-[0_0_8px_white]">
        ★ ${movie.rating.toFixed(1)}
      </div>
      <div class="absolute bottom-0 left-0 w-full bg-gradient-to-t from-black/90 via-black/40 to-transparent p-4 rounded-b-2xl">
        <h3 class="text-2xl font-bold tracking-wide text-white drop-shadow-lg leading-snug">
          ${movie.name}
        </h3>
        <p class="text-green-400 uppercase font-semibold text-sm mt-1">
          ${movie.category}
        </p>
        <p class="text-gray-200 font-normal text-xs mt-1 italic">
          ${releaseDate}
        </p>
      </div>
    </div>
  </article>
`;

                container.innerHTML += cardHtml;
            });

        } catch (error) {
            console.error("Error searching movies:", error);
            container.innerHTML = '<p class="text-white text-center col-span-4">Failed to search movies.</p>';
        }
    }

    // Select your search input (adjust selector if needed)
    const searchInput = document.querySelector('input[type="text"]');

    // Listen for input event to trigger search live
    searchInput.addEventListener('input', () => {
        searchMovies(searchInput.value);
    });


</script>

<script>
    const container = document.getElementById("all-movies-container");
    const paginationControls = document.getElementById("pagination-controls");
    const PAGE_SIZE = 12;
    let currentPage = 0;
    let hasNextPage = true;

    async function loadPaginatedMovies(page = 0) {
        container.innerHTML = '';
        paginationControls.innerHTML = '';
        currentPage = page;

        try {
            const res = await fetch(`http://localhost:8080/api/movies/paginated?page=${page}&size=${PAGE_SIZE}`);
            if (!res.ok) throw new Error("Failed to fetch paginated movies");

            const movies = await res.json();

            if (movies.length === 0 && page > 0) {
                // Go back to previous page if current is empty
                loadPaginatedMovies(page - 1);
                return;
            }

            hasNextPage = movies.length === PAGE_SIZE;

            movies.forEach(movie => {
                const releaseDate = new Date(movie.releaseDate).toLocaleDateString('en-US', {
                    year: 'numeric',
                    month: 'short',
                    day: 'numeric'
                });

                const cardHtml = `
<article class="movie-card-animated relative bg-gradient-to-br from-gray-900 via-black to-gray-900 rounded-2xl overflow-hidden border border-white shadow-[0_0_15px_rgba(255,255,255,0.4)] transform transition duration-300 flex flex-col backdrop-blur-sm h-80 min-w-[18rem]">
  <div class="relative w-full h-full rounded-2xl overflow-hidden">
    <img src="http://localhost:8080/uploads/${movie.imagePath}" alt="${movie.name}"
      class="w-full h-full object-cover brightness-75 hover:brightness-110 transition duration-500 ease-in-out" />
    <div class="absolute inset-0 bg-gradient-to-t from-black via-transparent to-transparent pointer-events-none"></div>
    <div class="absolute top-3 right-3 bg-green-500 text-black font-semibold px-3 py-1 rounded-md text-sm shadow-[0_0_8px_white]">
      ★ ${movie.rating.toFixed(1)}
    </div>
    <div class="absolute bottom-0 left-0 w-full bg-gradient-to-t from-black/90 via-black/40 to-transparent p-4 rounded-b-2xl">
      <h3 class="text-2xl font-bold tracking-wide text-white drop-shadow-lg leading-snug">
        ${movie.name}
      </h3>
      <p class="text-green-400 uppercase font-semibold text-sm mt-1">
        ${movie.category}
      </p>
    <p class="text-gray-200 text-xs font-normal mt-1 italic">
  ${releaseDate}
</p>

    </div>
  </div>
</article>
`;

                container.innerHTML += cardHtml;
            });

            renderPaginationControls();

        } catch (error) {
            console.error("Error loading paginated movies:", error);
            container.innerHTML = '<p class="text-white text-center col-span-4">Failed to load movies.</p>';
        }
    }

    function renderPaginationControls() {
        paginationControls.innerHTML = '';

        // Previous page number button if not on first page
        if (currentPage > 0) {
            const prevPageButton = document.createElement("button");
            prevPageButton.innerText = (currentPage).toString(); // page numbers shown to user are 1-based
            prevPageButton.className = "mx-1 px-4 py-2 text-white rounded cursor-pointer";
            prevPageButton.style.backgroundColor = "#6a6969";  // silver color
            prevPageButton.onmouseover = () => prevPageButton.style.backgroundColor = "#A9A9A9"; // darker on hover
            prevPageButton.onmouseout = () => prevPageButton.style.backgroundColor = "#C0C0C0";
            prevPageButton.onclick = () => loadPaginatedMovies(currentPage - 1);
            paginationControls.appendChild(prevPageButton);
        }

        // Current page number button (highlighted and disabled)
        const currentPageButton = document.createElement("button");
        currentPageButton.innerText = (currentPage + 1).toString();
        currentPageButton.className = "mx-1 px-4 py-2 text-white rounded cursor-default";
        currentPageButton.style.backgroundColor = "#6a6969"; // darker silver for current page
        currentPageButton.disabled = true; // disable clicking current page button
        paginationControls.appendChild(currentPageButton);

        if (hasNextPage) {
            const nextPageButton = document.createElement("button");
            nextPageButton.innerText = (currentPage + 2).toString();
            nextPageButton.className = "mx-1 px-4 py-2 text-white rounded cursor-pointer";
            nextPageButton.style.backgroundColor = "#6a6969";  // silver color
            nextPageButton.onmouseover = () => nextPageButton.style.backgroundColor = "#A9A9A9"; // darker on hover
            nextPageButton.onmouseout = () => nextPageButton.style.backgroundColor = "#C0C0C0";
            nextPageButton.onclick = () => loadPaginatedMovies(currentPage + 1);
            paginationControls.appendChild(nextPageButton);
        }
    }


    window.addEventListener('DOMContentLoaded', () => loadPaginatedMovies());
</script>


</body>
</html>
